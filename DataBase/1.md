# DataBase

## 트랜잭션

- 트랜잭션은 `ACID`를 보장해야 한다. 

- 원자성(Atomicity): 한 트랜잭션 내에서 실행한 작업들은 하나의 작업으로 간주한다. 

- 일관성(Consistency): 모든 트랜잭션은 일관성있는 데이터베이스 상태를 유지한다. 

- 고립성(Isolation): 동시에 실행되는 트랜잭션들이 서로 영향을 미치지 않도록 격리해야 한다. 

- 영구성(Durability): 트랜잭션을 성공적으로 마치면 그 결과가 항상 저장되어야 한다. 

<br>

## DB Isolation Level

1. Dirty Read

- 커밋되지 않은 수정 중인 데이터를 다른 트랜잭션에서 읽을 수 있도록 허용할 때 발생하는 현상

- 어떤 트랜잭션에서 아직 실행이 끝나지 않은 다른 트랜잭션에 의해 변경 사항을 보게 되는 경우

<br>

2. Non-Repeatable Read

- 한 트랜잭션에서 같은 SQL을 두 번 수행할 때, 두 SQL의 결과가 다르게 나타나는 비일관적인 현상

- 한 트랜잭션이 수행중일 때 다른 트랜잭션 값을 수정, 삭제함으로써 나타난다. 

<br>

3. Phantom Read

- 한 트랜잭션에서 같은 SQL을 두 번 수행할 때, 첫 번째 SQL에서 없던 데이터가 두 번째 SQL에서 나타나는 현상

- 한 트랜잭션이 수행 중일 때 다른 트랜잭션이 값을 삽입함으로써 나타남

<br>

### 트랜잭션 격리 수준

- 트랜잭션에서 일관성이 없는 데이터를 허용하도록 하는 수준

- 단계를 내려갈수록 격리 수준이 높아져서 일관성이 부족한 이슈는 적게 발생하지만, 동시 처리 성능은 떨어짐

<br>

### 1. Read Uncommitted

- SELECT가 수행되는 동안 해당 데이터에 공유 Lock이 걸리지 않는다. 

- 트랜잭션에 처리 중인 혹은 아직 커밋되지 않은 데이터를 다른 트랜잭션이 읽는 것을 허용한다. 

- Dirty Read, Not-Repetable Read, Phantom Read 발생

<br>

### 2. Read Committed 

- SELECT가 수행되는 동안 해당 데이터에 공유 Lock이 걸린다. 

- 트랜잭션이 수행되는 동안 다른 트랜잭션이 접근할 수 없어 대기하게 된다. 


-> 고립 레벨 다시 정리

<br>

